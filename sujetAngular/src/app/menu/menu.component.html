<ul>
  <li *ngFor="let item of myArray; let i = index">
    <button (click)="toggle[i] = !toggle[i]">{{item.name}}</button>
    <div *ngIf="item.submenus && toggle[i]">
      <ng-container *ngTemplateOutlet="tree; context: { $implicit: item.submenus, idx: i }"></ng-container>
    </div>
  </li>
</ul>

<ng-template #tree let-allItems let-idx="idx">
  <ul>
    <li *ngFor="let item of allItems; let n = index">
      <button (click)="toggle[idx] = !toggle[idx]">X</button>
      <button (click)="toggle[n] = !toggle[n]"><a href="#" >{{item.name}}</a></button>
      <div *ngIf="item.submenus && toggle[n]">
        <ng-container *ngTemplateOutlet="tree; context: { $implicit: item.submenus, idx: n }"></ng-container>
      </div>
    </li>
  </ul>
</ng-template>